<link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet">
<script src="https://unpkg.com/filepond/dist/filepond.js"></script>

{% if __SELF__.property('uploader_enable') == 0 %}
    <div style="margin-top: 2rem; padding: 10px; color:#a94442; background-color:#f2dede; border:solid 1px #ebccd1; border-radius:4px;">
        <h5><strong>Warning</strong></h5>
        <h6>Uploads are disabled.</h6>
        <h6>You need to explicitly enable this option on the component (this is a security measure).</h6>
    </div>
{% endif %}

{{ form_ajax(__SELF__ ~ '::onFormSubmit') }}

    <div id="{{ __SELF__ }}_forms_flash"></div>

    <div class="form-group">
        <h2>Apply for online job</h2>
    </div>

    <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" class="form-control">
    </div>

    <div class="form-group">
        <label for="email">Email:</label>
        <input type="text" id="email" name="email" class="form-control">
    </div>

    <div class="form-group">
        <label for="position">Position:</label>
        <select class="form-control" id="position" name="position">
            <option value=""></option>
            <option value="Lead">Lead</option>
            <option value="Senior">Senior</option>
            <option value="Direct">Direct</option>
            <option value="Corporate">Corporate</option>
            <option value="Dynamic">Dynamic</option>
        </select>
    </div>

    <div class="form-group">
        <label for="skills">Skills:</label>
        <textarea id="skills" name="skills" class="form-control" rows="8" cols="80" placeholder="Summary of skills"></textarea>
    </div>

    <hr>

    <div class="form-group">
        <h4>Upload your resume</h4>
        <input type="file" name="files" multiple>
    </div>

    <hr>

    <div class="form-group">
        {% partial '@recaptcha' %}
    </div>

    {{ form_submit() }}

{{ form_close() }}

{% if __SELF__.property('uploader_enable') == 1 %}
<script>
    const inputElement = document.querySelector('input[type="file"]');
    const pond = FilePond.create(inputElement);

    FilePond.setOptions({
        name: 'files[]',
        server: {
            url: '/martin/forms',
            process: '/process',
            revert: '/process',
            headers: {
                'X-CSRF-TOKEN': '{{ form_token() }}',
                'FILEPOND-FIELD': pond.name
            }
        }
    });
</script>
{% endif %}
